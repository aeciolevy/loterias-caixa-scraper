{"version":3,"sources":["src/index.js"],"names":["insertCommaAfterTwoChars","str","replace","mountJSON","html","type","arrData","result","$","cheerio","load","text","split","length","Promise","resolve","JSON","stringify","err","errCode","numberRaffle","locationRaffle","unorNumbers","orderedNumbers","date","totalCollection","isAccumulated","parseInt","sena","winers","prizeByWinner","quina","quadra","nextRaffle","estimatedPrize","accumulated","accumulatedMegavirada","e","reject","require","rp","Object","defineProperty","exports","value","resultByNumber","number","jar","encoding","error"],"mappings":"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","sourcesContent":["const cheerio = require('cheerio')\nconst rp = require('request-promise')\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n})\n\nfunction insertCommaAfterTwoChars (str) {\n  return str.replace(/\\B(?=(\\d{2})+(?!\\d))/g, ',')\n}\n\nasync function mountJSON (html, type) {\n  // eslint-disable-next-line prefer-const\n  let $ = cheerio.load(html)\n  let arrData\n  let result\n\n  if ($('body').text().split('|').length < 4) {\n    return Promise.resolve(JSON.stringify({ err: 'Resultado nÃ£o disponivel!', errCode: 1 }))\n  }\n\n  if (type === 'megasena') {\n    try {\n      arrData = $('body').text().split('|')\n      result = {\n        numberRaffle: arrData[0],\n        locationRaffle: `${arrData[14]},${arrData[12]},${arrData[13]}`,\n        unorNumbers: insertCommaAfterTwoChars(arrData[2]),\n        orderedNumbers: insertCommaAfterTwoChars(arrData[20]),\n        date: arrData[11],\n        totalCollection: arrData[24],\n        // eslint-disable-next-line radix\n        isAccumulated: parseInt(arrData[3]) > 0,\n        sena: {\n          winers: arrData[3],\n          prizeByWinner: arrData[4]\n        },\n        quina: {\n          winers: arrData[5],\n          prizeByWinner: arrData[6]\n        },\n        quadra: {\n          winers: arrData[7],\n          prizeByWinner: arrData[8]\n        },\n        nextRaffle: {\n          date: arrData[22],\n          estimatedPrize: arrData[21],\n          accumulated: arrData[1]\n        },\n        accumulatedMegavirada: arrData[23]\n        // eslint-disable-next-line semi\n      }\n    } catch (e) {\n      return Promise.reject(JSON.stringify(e))\n    }\n  }\n  return Promise.resolve(JSON.stringify(result))\n  // )\n}\n\n// eslint-disable-next-line func-names\nexports.resultByNumber = async function (type, number) {\n  let html\n  if (number === undefined) {\n    try {\n      html = await rp(`http://www1.caixa.gov.br/loterias/loterias/${type}/${type}_pesquisa_new.asp`, {\n        jar: true,\n        encoding: 'utf8'\n      })\n      return await mountJSON(html, type)\n    } catch (err) {\n      return Promise.reject(JSON.stringify(err.error))\n    }\n  } else {\n    try {\n      html = await rp(`http://www1.caixa.gov.br/loterias/loterias/${type}/${type}_pesquisa_new.asp?submeteu=sim&opcao=concurso&txtConcurso=${number}`, {\n        jar: true,\n        encoding: 'utf8'\n      })\n      return await mountJSON(html, type)\n    } catch (err) {\n      return Promise.reject(JSON.stringify(err.error))\n    }\n  }\n  // eslint-disable-next-line semi\n}\n"],"file":"index.js"}