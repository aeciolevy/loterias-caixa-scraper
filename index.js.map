{"version":3,"sources":["src/index.js"],"names":["insertCommaAfterTwoChars","str","replace","selectArrayInterval","arr","initial","final","arrAux","i","push","mountJSON","html","type","arrData","result","$","cheerio","load","text","split","length","Promise","resolve","JSON","stringify","err","errCode","e","reject","numberRaffle","locationRaffle","unorNumbers","orderedNumbers","date","totalCollection","isAccumulated","parseInt","sena","winers","prizeByWinner","quina","quadra","nextRaffle","estimatedPrize","accumulated","accumulatedMegavirada","console","log","join","terno","duque","accumulatedSaoJoao","require","rp","Object","defineProperty","exports","value","resultByNumber","number","jar","error"],"mappings":"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","sourcesContent":["const cheerio = require('cheerio')\r\nconst rp = require('request-promise')\r\n\r\nObject.defineProperty(exports, '__esModule', {\r\n  value: true\r\n})\r\n\r\nfunction insertCommaAfterTwoChars (str) {\r\n  return str.replace(/\\B(?=(\\d{2})+(?!\\d))/g, ',')\r\n}\r\n\r\nfunction selectArrayInterval (arr, initial, final) {\r\n  let arrAux = []\r\n  for (let i = initial - 1; i <= final - 1; i++) {\r\n    arrAux.push(arr[i])\r\n  }\r\n  return arrAux\r\n}\r\n\r\nasync function mountJSON (html, type) {\r\n  // eslint-disable-next-line prefer-const\r\n  let $ = cheerio.load(html)\r\n  let arrData\r\n  let result\r\n\r\n  if ($('body').text().split('|').length < 4) {\r\n    return Promise.resolve(JSON.stringify({ err: 'Resultado nÃ£o disponivel!', errCode: 1 }))\r\n  }\r\n\r\n  try {\r\n    arrData = $('body').text().split('|')\r\n  } catch (e) {\r\n    return Promise.reject(JSON.stringify(e))\r\n  }\r\n\r\n  if (type === 'megasena') {\r\n    try {\r\n      result = {\r\n        numberRaffle: arrData[0],\r\n        locationRaffle: `${arrData[14]},${arrData[12]},${arrData[13]}`,\r\n        unorNumbers: insertCommaAfterTwoChars(arrData[2]),\r\n        orderedNumbers: insertCommaAfterTwoChars(arrData[20]),\r\n        date: arrData[11],\r\n        totalCollection: arrData[24],\r\n        // eslint-disable-next-line radix\r\n        isAccumulated: parseInt(arrData[3]) === 0,\r\n        sena: {\r\n          winers: arrData[3],\r\n          prizeByWinner: arrData[4]\r\n        },\r\n        quina: {\r\n          winers: arrData[5],\r\n          prizeByWinner: arrData[6]\r\n        },\r\n        quadra: {\r\n          winers: arrData[7],\r\n          prizeByWinner: arrData[8]\r\n        },\r\n        nextRaffle: {\r\n          date: arrData[22],\r\n          estimatedPrize: arrData[21],\r\n          accumulated: arrData[1]\r\n        },\r\n        accumulatedMegavirada: arrData[23]\r\n        // eslint-disable-next-line semi\r\n      }\r\n    } catch (e) {\r\n      return Promise.reject(JSON.stringify(e))\r\n    }\r\n  }\r\n  if (type === 'quina') {\r\n    try {\r\n      console.log(arrData)\r\n      result = {\r\n        numberRaffle: arrData[0],\r\n        locationRaffle: `${arrData[4]},${arrData[2]},${arrData[3]}`,\r\n        unorNumbers: selectArrayInterval(insertCommaAfterTwoChars(arrData[14]).split(','), 1, 5).join(','),\r\n        orderedNumbers: selectArrayInterval(insertCommaAfterTwoChars(arrData[14]).split(','), 6, 10).join(','),\r\n        date: arrData[16],\r\n        totalCollection: arrData[20],\r\n        // eslint-disable-next-line radix\r\n        isAccumulated: parseInt(arrData[6]) === 0,\r\n        quina: {\r\n          winers: arrData[6],\r\n          prizeByWinner: arrData[7]\r\n        },\r\n        quadra: {\r\n          winers: arrData[8],\r\n          prizeByWinner: arrData[9]\r\n        },\r\n        terno: {\r\n          winers: arrData[10],\r\n          prizeByWinner: arrData[11]\r\n        },\r\n        duque: {\r\n          winers: arrData[23],\r\n          prizeByWinner: arrData[22]\r\n        },\r\n        nextRaffle: {\r\n          date: arrData[18],\r\n          estimatedPrize: arrData[17],\r\n          accumulated: arrData[13]\r\n        },\r\n        accumulatedSaoJoao: arrData[21]\r\n        // eslint-disable-next-line semi\r\n      }\r\n    } catch (e) {\r\n      return Promise.reject(JSON.stringify(e))\r\n    }\r\n  }\r\n  return Promise.resolve(result)\r\n  // )\r\n}\r\n\r\n// eslint-disable-next-line func-names\r\nexports.resultByNumber = async function (type, number) {\r\n  let html\r\n  if (number === undefined) {\r\n    try {\r\n      html = await rp(`http://www1.caixa.gov.br/loterias/loterias/${type}/${type}_pesquisa_new.asp`, {\r\n        jar: true\r\n        // encoding: 'utf8'\r\n      })\r\n      return await mountJSON(html, type)\r\n    } catch (err) {\r\n      return Promise.reject(JSON.stringify(err.error))\r\n    }\r\n  } else {\r\n    try {\r\n      html = await rp(`http://www1.caixa.gov.br/loterias/loterias/${type}/${type}_pesquisa_new.asp?submeteu=sim&opcao=concurso&txtConcurso=${number}`, {\r\n        jar: true\r\n        // encoding: 'utf8'\r\n      })\r\n      return await mountJSON(html, type)\r\n    } catch (err) {\r\n      return Promise.reject(JSON.stringify(err.error))\r\n    }\r\n  }\r\n  // eslint-disable-next-line semi\r\n}\r\n"],"file":"index.js"}